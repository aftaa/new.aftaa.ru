{% extends 'base.html.twig' %}
{% block css %}
    <link rel="stylesheet" href="{{ asset('css/le-frog/jquery-ui.css') }}">
    <link rel="stylesheet" href="{{ asset('css/le-frog/theme.css') }}">
{% endblock %}
{% block js %}
    <script src="{{ asset('js/block.js') }}?t={{ 'now'|date('U') }}"></script>
    <script src="{{ asset('js/link.js') }}?t={{ 'now'|date('U') }}"></script>
    <script src="{{ asset('js/admin.js') }}?t={{ 'now'|date('U') }}"></script>
{% endblock %}
{% block body %}
    {% include 'block/modal.html.twig' %}
    {% include 'link/modal.html.twig' %}
    <main id="app">
        <div class="container-fluid">
            <div class="row">
                <div class="admin-block col-sm-6 col-lg-4" v-for="blocks in columns">
                    <div v-for="block in blocks">
                        <div class="ui-icon ui-icon-key private" style="float: left;" v-if="block.private"></div>
                        <h3 class="mt-3">
                            <span v-html="block.name" v-bind:title="block.id"></span>

                            <a href="#" v-bind:data-id="block.id" v-on:click="loadBlock"
                               class="ui-icon ui-icon-pencil">
                            </a>

                            <a href="#" v-bind:data-id="block.id" v-on:click="unlinkBlock"
                               class="ui-icon ui-icon-trash">
                            </a>

                            <a href="#" v-bind:data-col-num="block.col" v-on:click="newBlock"
                               class="ui-icon ui-icon-plus">
                            </a>
                        </h3>

                        <table class="table table-hover table-striped" width="100%">
                            <tbody>
                            <tr v-for="link in block.links">
                                <td>
                                    <a v-bind:href="link.icon" target="_blank">
                                        <img alt="" v-bind:src="link.icon" width="16" height="16">
                                    </a>&nbsp;
                                </td>
                                <td>
                                    <div class="ui-icon ui-icon-key private" v-if="link.private"></div>
                                    <a v-bind:href="link.href" target="_blank" v-html="link.name"
                                       v-bind:data-id="link.id" v-on:click="conversion" v-bind:title="link.id"></a>
                                    <small class="small color-gray" v-if="views[link.id]">
                                        (<span v-html="views[link.id]"></span>)
                                    </small>
                                </td>
                                <td width="20">
                                    <a href="#" v-bind:data-id="link.id" v-on:click="loadLink"
                                       class="ui-icon ui-icon-pencil">
                                    </a>
                                </td>
                                <td width="20">
                                    <a href="#" v-bind:data-id="link.id" v-on:click="unlinkLink"
                                       class="ui-icon ui-icon-trash">
                                    </a>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                        <a href="#" v-bind:data-block-id="block.id" v-on:click="newLink"
                           class="ui-icon ui-icon-plus">
                        </a>
                        <br>
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <hr size="1m">
            <h1><img src="/image/recycle.png" width="64" height="64" alt=""> Recycle bin</h1>
            <div class="row">
                <div v-for="(column, colNum) in trashColumns">
                    <div class="block col-sm-6 col-lg-4" v-bind:class="{ dropped: block.block_deleted }" v-for="(block, blockName) in column">
                        <div class="ui-icon ui-icon-key private" style="float: left;" v-if="block.block_private"></div>
                        <h3 class="mt-3">
                            <span v-html="blockName"></span>
                            <a href="#" v-bind:data-id="block.block_id" v-on:click="recoveryBlock"
                               class="ui-icon ui-icon-arrow-1-e-w">
                            </a>
                        </h3>

                        <table class="table-hover table-bordered">
                            <tr v-for="link in block.links">
                                <td>
                                    <a v-bind:href="link.icon" target="_blank">
                                        <img alt="" v-bind:src="link.icon" width="16" height="16">
                                    </a>&nbsp;
                                </td>
                                <td>
                                    <a v-bind:href="link.href" target="_blank" v-html="link.link_id + ': ' + link.link_name"
                                       v-bind:data-id="link.link_id" v-on:click="conversion"></a>
                                </td>
                                <td width="20">
                                    <a href="#" v-bind:data-id="link.link_id" v-on:click="recoveryLink"
                                       class="ui-icon ui-icon-arrow-1-e-w">
                                    </a>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
            <br><br><br>
        </div>
    </main>
    <script>
        // let modalBlock = new bootstrap.Modal('#modalBlock');
        // modalBlock.show();
    </script>
{% endblock %}
